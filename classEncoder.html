<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nucleo Firmware: Encoder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="little_tikes.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nucleo Firmware
   </div>
   <div id="projectbrief">ESProject Group 30</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classEncoder.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classEncoder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Encoder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>STM32F4 HAL TIM <a class="el" href="classEncoder.html" title="STM32F4 HAL TIM Encoder Wrapper intended for MBED OS.">Encoder</a> Wrapper intended for MBED OS.  
 <a href="classEncoder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Encoder_8hpp_source.html">Encoder.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a53b1f02f7154949d695f7afb4d6655ea"><td class="memItemLeft" align="right" valign="top"><a id="a53b1f02f7154949d695f7afb4d6655ea"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Encoder</b> (TIM_HandleTypeDef *timer)</td></tr>
<tr class="separator:a53b1f02f7154949d695f7afb4d6655ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acff6a808ec22905c247f582bded4a9d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEncoder.html#acff6a808ec22905c247f582bded4a9d5">getSteps</a> ()</td></tr>
<tr class="memdesc:acff6a808ec22905c247f582bded4a9d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of steps since the previous 'tick'.  <a href="classEncoder.html#acff6a808ec22905c247f582bded4a9d5">More...</a><br /></td></tr>
<tr class="separator:acff6a808ec22905c247f582bded4a9d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7fcd5ad0cfde12666720a8b2ac0ae2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEncoder.html#a9d7fcd5ad0cfde12666720a8b2ac0ae2">update</a> ()</td></tr>
<tr class="memdesc:a9d7fcd5ad0cfde12666720a8b2ac0ae2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the encoder ticker at the previously defined sample rate.  <a href="classEncoder.html#a9d7fcd5ad0cfde12666720a8b2ac0ae2">More...</a><br /></td></tr>
<tr class="separator:a9d7fcd5ad0cfde12666720a8b2ac0ae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>STM32F4 HAL TIM <a class="el" href="classEncoder.html" title="STM32F4 HAL TIM Encoder Wrapper intended for MBED OS.">Encoder</a> Wrapper intended for MBED OS. </p>
<h1><a class="anchor" id="Usage"></a>
(TIcker/MBED)</h1>
<ol type="1">
<li>Use STM32CubeMX to generate the timer configuration code. (Refer to your micro's reference manual and CubeMX)</li>
<li>Put the config code somewhere in your code. You need to call your MX_TIMx_Init code before using <a class="el" href="classEncoder.html" title="STM32F4 HAL TIM Encoder Wrapper intended for MBED OS.">Encoder</a>. This includes putting the Timer MSP weak functions somewhere, for the HAL to use.</li>
<li>Pass your TIM_HandleTypeDef you want to use to <a class="el" href="classEncoder.html" title="STM32F4 HAL TIM Encoder Wrapper intended for MBED OS.">Encoder</a> when initializing it.</li>
<li>Start the <a class="el" href="classEncoder.html" title="STM32F4 HAL TIM Encoder Wrapper intended for MBED OS.">Encoder</a> using <code>start</code> when ready. There are 2 ways to obtain the speed, one is more reliable while the other might hinder performance slightly. If you are able to be relatively optimistic that the internal ticker can run regularly without large delays that change its time interval, use <code>getSteps</code>, as it will be equivalent to the number of steps within <code>sampleRate</code>. Otherwise, use <code>getSpeed</code>, it will it will return a speed in terms of <code>steps/millisecond</code> and uses the mbed microsecond ticker to get a time stamp.</li>
</ol>
<h1><a class="anchor" id="Usage"></a>
(TIcker/MBED)</h1>
<p>0. Define the macro LIB_ENCODER_NOMBED to disable ticker/remove mbed dependency.</p>
<p>See above up to &amp; including step 3.</p>
<ol type="1">
<li>Regularly call <code>update</code> yourself. You must be able to call this regularly somehow, or precisely determine the time between calls, as each call updates the steps as the number of steps since last update call. If you dont have mbed/use this feature, you will not be able to make use of <code>getSpeed</code>. </li>
</ol>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="acff6a808ec22905c247f582bded4a9d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acff6a808ec22905c247f582bded4a9d5">&#9670;&nbsp;</a></span>getSteps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Encoder::getSteps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of steps since the previous 'tick'. </p>
<dl class="section return"><dt>Returns</dt><dd>unsigned int Number of steps since last tick. </dd></dl>

</div>
</div>
<a id="a9d7fcd5ad0cfde12666720a8b2ac0ae2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7fcd5ad0cfde12666720a8b2ac0ae2">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Encoder::update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the encoder ticker at the previously defined sample rate. </p>
<p>Check for a change in steps counted from the timer. Call regularly (perhaps via a ticker or background event) for a regular speed. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/Encoder/<a class="el" href="Encoder_8hpp_source.html">Encoder.hpp</a></li>
<li>lib/Encoder/Encoder.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classEncoder.html">Encoder</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
